<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± API Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .product-card {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            gap: 20px;
        }
        .product-image {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
        }
        .product-info {
            flex: 1;
        }
        .product-name {
            font-size: 20px;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 10px;
        }
        .product-price {
            font-size: 24px;
            color: #10b981;
            font-weight: bold;
        }
        .original-price {
            text-decoration: line-through;
            color: #9ca3af;
            margin-right: 10px;
        }
        .product-category {
            display: inline-block;
            background: #dbeafe;
            color: #1e40af;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            margin-bottom: 10px;
        }
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 18px;
            color: #6b7280;
        }
        h1 {
            color: #1f2937;
            text-align: center;
        }
        .stats {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        .error {
            background: #fee2e2;
            color: #991b1b;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ›ï¸ Ø§Ø®ØªØ¨Ø§Ø± API Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>
    
    <div class="stats" id="stats">
        <div class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
    </div>

    <div id="products"></div>

    <script>
        const API_URL = 'http://localhost:5000/api';

        async function loadProducts() {
            try {
                const response = await fetch(`${API_URL}/products`);
                const data = await response.json();
                
                console.log('Products data:', data);
                
                const products = Array.isArray(data) ? data : (data.products || []);
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
                document.getElementById('stats').innerHTML = `
                    <h2>ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
                    <p><strong>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</strong> ${products.length}</p>
                    <p><strong>API URL:</strong> ${API_URL}/products</p>
                    <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> <span style="color: #10b981;">âœ… ÙŠØ¹Ù…Ù„</span></p>
                `;
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                const productsDiv = document.getElementById('products');
                
                if (products.length === 0) {
                    productsDiv.innerHTML = `
                        <div class="error">
                            <h3>âš ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª</h3>
                            <p>Ù‚Ù… Ø¨ØªØ´ØºÙŠÙ„: <code>cd backend && npm run add:demo</code></p>
                        </div>
                    `;
                    return;
                }
                
                productsDiv.innerHTML = products.map(product => `
                    <div class="product-card">
                        <img src="${product.images?.[0] || 'https://via.placeholder.com/150'}" 
                             alt="${product.name}" 
                             class="product-image">
                        <div class="product-info">
                            <div class="product-category">${product.category}</div>
                            <div class="product-name">${product.name}</div>
                            <p style="color: #6b7280; font-size: 14px;">${product.description}</p>
                            <div>
                                <span class="product-price">${product.price} Ø±ÙŠØ§Ù„</span>
                                ${product.originalPrice ? `<span class="original-price">${product.originalPrice} Ø±ÙŠØ§Ù„</span>` : ''}
                            </div>
                            <p style="color: #6b7280; font-size: 12px; margin-top: 10px;">
                                Ø§Ù„Ù…Ø®Ø²ÙˆÙ†: ${product.stock} | Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ${product.rating || 'N/A'} â­
                            </p>
                        </div>
                    </div>
                `).join('');
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('stats').innerHTML = `
                    <div class="error">
                        <h3>âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</h3>
                        <p>${error.message}</p>
                        <p>ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Backend Ø¹Ù„Ù‰: ${API_URL}</p>
                    </div>
                `;
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        loadProducts();
    </script>
</body>
</html>
