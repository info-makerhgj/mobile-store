# โ ูุธุงู ุงูุดุญู ุฌุงูุฒ!

## ๐ ุชู ุฅูุดุงุก ูุธุงู ุดุญู ูุชูุงูู

ุชู ุจูุงุก ูุธุงู ุดุญู ุงุญุชุฑุงูู ูุน ุฑุจุท API ุญูููู ูุซูุงุซ ุดุฑูุงุช ุดุญู ุณุนูุฏูุฉ ุฑุงุฆุฏุฉ.

---

## ๐ฆ ูุง ุชู ุฅูุดุงุคู

### Backend (API)

#### 1. Types & Models
- โ `backend/src/types/shipping.ts` - ุชุนุฑููุงุช TypeScript
- โ `backend/prisma/schema.prisma` - ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:
  - `ShippingProvider` - ูุนูููุงุช ุดุฑูุงุช ุงูุดุญู
  - `ShippingRate` - ุฃุณุนุงุฑ ุงูุดุญู ููู ูุฏููุฉ
  - `Shipment` - ุณุฌู ุงูุดุญูุงุช

#### 2. Services (ุฎุฏูุงุช ุงูุดุญู)
- โ `backend/src/services/shippingProviders/SmsaService.ts` - ุฎุฏูุฉ ุณูุณุง
- โ `backend/src/services/shippingProviders/RedboxService.ts` - ุฎุฏูุฉ ุฑูุฏุจูุณ
- โ `backend/src/services/shippingProviders/AramexService.ts` - ุฎุฏูุฉ ุฃุฑุงููุณ
- โ `backend/src/services/ShippingService.ts` - ุงูุฎุฏูุฉ ุงูุฑุฆูุณูุฉ

#### 3. Controllers & Routes
- โ `backend/src/controllers/shippingController.ts` - ูุนุงูุฌุงุช API
- โ `backend/src/routes/shipping.ts` - ูุณุงุฑุงุช API
- โ `backend/src/server.ts` - ุชู ุฅุถุงูุฉ routes ููุณูุฑูุฑ

#### 4. Scripts
- โ `backend/init-shipping.ts` - ุณูุฑูุจุช ุงูุชููุฆุฉ
- โ `backend/test-shipping.ts` - ุณูุฑูุจุช ุงูุงุฎุชุจุงุฑ
- โ `backend/package.json` - ุชู ุฅุถุงูุฉ npm scripts

### Frontend (ูุงุฌูุฉ ุงููุณุชุฎุฏู)

#### 1. Admin Panel
- โ `frontend/src/app/admin/settings/shipping/page.tsx` - ููุญุฉ ุฅุฏุงุฑุฉ ุงูุดุญู
  - ุชูุนูู/ุชุนุทูู ุงูุดุฑูุงุช
  - ุฅุฏุฎุงู ููุงุชูุญ API
  - ุงูุชุจุฏูู ุจูู ุงููุถุน ุงูุชุฌุฑูุจู ูุงูุญูููู
  - ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช

#### 2. Components
- โ `frontend/src/components/ShippingSelector.tsx` - ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุดุญู
  - ุนุฑุถ ุงูุฎูุงุฑุงุช ุงููุชุงุญุฉ
  - ุงูุฃุณุนุงุฑ ูุงููุฏุฉ ุงููุชููุนุฉ
  - ุงุฎุชูุงุฑ ุงูุดุฑูุฉ

### Documentation

- โ `SHIPPING_SETUP_AR.md` - ุฏููู ุงูุฅุนุฏุงุฏ ุงููุงูู
- โ `START_SHIPPING.md` - ุฏููู ุงูุชุดุบูู ุงูุณุฑูุน
- โ `ACTIVATE_SHIPPING.bat` - ููู ุชุดุบูู ุชููุงุฆู

---

## ๐ ุงููููุฒุงุช

### 1. ุฑุจุท API ุญูููู
- โ ุณูุณุง (SMSA Express)
- โ ุฑูุฏุจูุณ (Redbox)
- โ ุฃุฑุงููุณ (Aramex)

### 2. ูุถุนูู ููุนูู
- ๐งช **ูุถุน ุชุฌุฑูุจู**: ููุงุฎุชุจุงุฑ ุจุฏูู ุงุชุตุงู ุญูููู
- ๐ **ูุถุน ุญูููู**: ุฑุจุท ูุจุงุดุฑ ูุน APIs ุงูุดุฑูุงุช

### 3. ุฅุฏุงุฑุฉ ูุงููุฉ
- โ๏ธ ุชูุนูู/ุชุนุทูู ุงูุดุฑูุงุช
- ๐ ุฅุฏุงุฑุฉ ููุงุชูุญ API
- ๐ฐ ุฃุณุนุงุฑ ูุฎุตุตุฉ ููู ูุฏููุฉ
- ๐ ุชุชุจุน ุงูุดุญูุงุช

### 4. ุชูุงูู ุชููุงุฆู
- ๐ ูุฑุจูุท ูุน ูุธุงู ุงูุทูุจุงุช
- ๐ณ ุญุณุงุจ ุชููุงุฆู ููุชูููุฉ
- ๐ฆ ุฅูุดุงุก ุดุญูุงุช ุชููุงุฆูุงู
- ๐ ุชุชุจุน ุงูุดุญูุงุช

---

## ๐ API Endpoints

### Public (ูุชุงุญ ููุฌููุน)
```
GET  /api/shipping/providers/enabled  - ุงูุดุฑูุงุช ุงูููุนูุฉ
GET  /api/shipping/rates?city=ุงูุฑูุงุถ  - ุฃุณุนุงุฑ ุงูุดุญู
GET  /api/shipping/track/:trackingNumber - ุชุชุจุน ุงูุดุญูุฉ
```

### Protected (ูุชุทูุจ ุชุณุฌูู ุฏุฎูู)
```
POST /api/shipping/shipments - ุฅูุดุงุก ุดุญูุฉ
```

### Admin (ููุฅุฏุงุฑุฉ ููุท)
```
GET    /api/shipping/providers     - ูู ุงูุดุฑูุงุช
PUT    /api/shipping/providers/:id - ุชุญุฏูุซ ุดุฑูุฉ
POST   /api/shipping/rates         - ุฅุถุงูุฉ ุณุนุฑ
PUT    /api/shipping/rates/:id     - ุชุญุฏูุซ ุณุนุฑ
DELETE /api/shipping/rates/:id     - ุญุฐู ุณุนุฑ
```

---

## ๐ฐ ุงูุฃุณุนุงุฑ ุงูุงูุชุฑุงุถูุฉ

ุชู ุฅุถุงูุฉ ุฃุณุนุงุฑ ูู **10 ูุฏู** ุฑุฆูุณูุฉ:

| ุงููุฏููุฉ | ุณูุณุง | ุฑูุฏุจูุณ | ุฃุฑุงููุณ |
|---------|------|--------|--------|
| ุงูุฑูุงุถ | 15 ุฑูุงู | 18 ุฑูุงู | 20 ุฑูุงู |
| ุฌุฏุฉ | 20 ุฑูุงู | 15 ุฑูุงู | 25 ุฑูุงู |
| ุงูุฏูุงู | 20 ุฑูุงู | 22 ุฑูุงู | 18 ุฑูุงู |
| ููุฉ | 20 ุฑูุงู | 15 ุฑูุงู | 25 ุฑูุงู |
| ุงููุฏููุฉ | 25 ุฑูุงู | 20 ุฑูุงู | 28 ุฑูุงู |
| ุงูุฎุจุฑ | 20 ุฑูุงู | 22 ุฑูุงู | 18 ุฑูุงู |
| ุงูุทุงุฆู | 22 ุฑูุงู | 18 ุฑูุงู | 26 ุฑูุงู |
| ุชุจูู | 30 ุฑูุงู | 28 ุฑูุงู | 32 ุฑูุงู |
| ุฃุจูุง | 28 ุฑูุงู | 26 ุฑูุงู | 30 ุฑูุงู |
| ุญุงุฆู | 28 ุฑูุงู | 26 ุฑูุงู | 30 ุฑูุงู |

---

## ๐ฏ ููููุฉ ุงูุชุดุบูู

### ุงูุทุฑููุฉ ุงูุณุฑูุนุฉ (ููุตู ุจูุง)
```bash
# ุดุบูู ุงูููู ุงูุชููุงุฆู
ACTIVATE_SHIPPING.bat
```

### ุงูุทุฑููุฉ ุงููุฏููุฉ
```bash
# 1. ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช
cd backend
npx prisma generate

# 2. ุชููุฆุฉ ุงูุจูุงูุงุช
npm run init:shipping

# 3. ุชุดุบูู ุงูุณูุฑูุฑ
npm run dev

# 4. ุงุฎุชุจุงุฑ ุงููุธุงู (ุงุฎุชูุงุฑู)
npm run test:shipping
```

### ูุชุญ ููุญุฉ ุงูุฅุฏุงุฑุฉ
```
http://localhost:3000/admin/settings/shipping
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ูู Terminal
```bash
cd backend
npm run test:shipping
```

### 2. ุงุฎุชุจุงุฑ ูู ุงููุชุตูุญ
1. ุงูุชุญ ููุญุฉ ุฅุฏุงุฑุฉ ุงูุดุญู
2. ุชุฃูุฏ ูู ุชูุนูู ุดุฑูุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู
3. ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุทูุจุงุช
4. ุงุฎุชุฑ ููุชุฌ ูุฃููู ุงูุทูุจ
5. ุงุฎุชุฑ ุทุฑููุฉ ุงูุดุญู

---

## ๐ง ุงูุฅุนุฏุงุฏุงุช

### ุงููุถุน ุงูุชุฌุฑูุจู (Test Mode)
- โ ููุนูู ุงูุชุฑุงุถูุงู
- โ ูุง ูุญุชุงุฌ ููุงุชูุญ API
- โ ูุณุชุฎุฏู ุจูุงูุงุช ููููุฉ
- โ ูุซุงูู ููุชุทููุฑ ูุงูุงุฎุชุจุงุฑ

### ุงููุถุน ุงูุญูููู (Production Mode)

#### ุณูุณุง (SMSA)
1. ุณุฌู ูู: https://smsaexpress.com
2. ุงุญุตู ุนูู API Key + Secret
3. ุฃุฏุฎููุง ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ

#### ุฑูุฏุจูุณ (Redbox)
1. ุณุฌู ูู: https://redboxsa.com
2. ุงุญุตู ุนูู API Token
3. ุฃุฏุฎูู ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ

#### ุฃุฑุงููุณ (Aramex)
1. ุณุฌู ูู: https://www.aramex.com/sa/ar
2. ุงุญุตู ุนูู Username + Password + Account Number
3. ุฃุฏุฎููุง ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ

---

## ๐ ุญุงูุงุช ุงูุดุญูุฉ

| ุงูุญุงูุฉ | ุงููุตู ุงูุนุฑุจู |
|--------|--------------|
| `pending` | ููุฏ ุงูุงูุชุธุงุฑ |
| `picked_up` | ุชู ุงูุงุณุชูุงู |
| `in_transit` | ููุฏ ุงูุชูุตูู |
| `out_for_delivery` | ุฎุฑุฌ ููุชูุตูู |
| `delivered` | ุชู ุงูุชูุตูู |
| `failed` | ูุดู ุงูุชูุตูู |
| `returned` | ุชู ุงูุฅุฑุฌุงุน |

---

## ๐จ ุงุณุชุฎุฏุงู ูู ุงูููุฏ

### ูุซุงู: ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุดุญู
```tsx
import ShippingSelector from '@/components/ShippingSelector';

function CheckoutPage() {
  const [selectedShipping, setSelectedShipping] = useState(null);

  return (
    <ShippingSelector
      city="ุงูุฑูุงุถ"
      onSelect={(option) => setSelectedShipping(option)}
      selectedProviderId={selectedShipping?.providerId}
    />
  );
}
```

### ูุซุงู: ุฅูุดุงุก ุดุญูุฉ
```typescript
const result = await fetch('http://localhost:4000/api/shipping/shipments', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${token}`,
  },
  body: JSON.stringify({
    orderId: 'ORDER123',
    providerId: 'provider_id',
    customerInfo: {
      name: 'ุฃุญูุฏ ูุญูุฏ',
      phone: '0501234567',
      address: 'ุดุงุฑุน ุงูููู ููุฏ',
      city: 'ุงูุฑูุงุถ',
    },
    items: [{ name: 'iPhone 15', quantity: 1, value: 4500 }],
    totalValue: 4500,
  }),
});
```

---

## ๐ ุงููููุงุช ุงููุฑุฌุนูุฉ

- **ุฏููู ุงูุฅุนุฏุงุฏ ุงููุงูู**: `SHIPPING_SETUP_AR.md`
- **ุฏููู ุงูุชุดุบูู ุงูุณุฑูุน**: `START_SHIPPING.md`
- **ููู ุงูุชุดุบูู ุงูุชููุงุฆู**: `ACTIVATE_SHIPPING.bat`

---

## โ ูุงุฆูุฉ ุงูุชุญูู

ูุจู ุงูุจุฏุกุ ุชุฃูุฏ ูู:
- [ ] MongoDB ูุนูู
- [ ] Backend ุนูู port 4000
- [ ] Frontend ุนูู port 3000
- [ ] ุชู ุชุดุบูู `ACTIVATE_SHIPPING.bat`
- [ ] ุชู ูุชุญ ููุญุฉ ุงูุฅุฏุงุฑุฉ
- [ ] ุชู ุชูุนูู ุดุฑูุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ููุชุทููุฑ ูุงูุงุฎุชุจุงุฑ:
1. โ ุงุณุชุฎุฏู ุงููุถุน ุงูุชุฌุฑูุจู
2. โ ุงุฎุชุจุฑ ูู ุงูููุฒุงุช
3. โ ุชุฃูุฏ ูู ุนูู ูู ุดูุก

### ููุฅูุชุงุฌ (Production):
1. ๐ ุณุฌู ูู ุดุฑูุงุช ุงูุดุญู
2. ๐ ุงุญุตู ุนูู ููุงุชูุญ API
3. โ๏ธ ุฃุฏุฎู ุงูููุงุชูุญ ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ
4. ๐ ุบููุฑ ุฅูู ุงููุถุน ุงูุญูููู
5. ๐ฆ ุงุจุฏุฃ ุงูุดุญู ุงููุนูู!

---

## ๐ ุงููุธุงู ุฌุงูุฒ!

ูุธุงู ุงูุดุญู ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐

**ุงุจุฏุฃ ุงูุขู:**
```bash
ACTIVATE_SHIPPING.bat
```

ุซู ุงูุชุญ: http://localhost:3000/admin/settings/shipping

---

**ุชู ุจูุงุก ุงููุธุงู ุจุงููุงูู ูุน:**
- โ ุฑุจุท API ุญูููู ูู 3 ุดุฑูุงุช ุดุญู
- โ ููุญุฉ ุฅุฏุงุฑุฉ ูุงููุฉ
- โ ูุถุน ุชุฌุฑูุจู ููุงุฎุชุจุงุฑ
- โ ุชุชุจุน ุงูุดุญูุงุช
- โ ุฃุณุนุงุฑ ูุฎุตุตุฉ
- โ ุชูุงูู ุชููุงุฆู ูุน ุงูุทูุจุงุช

**ุฌุงูุฒ ููุงูุทูุงู! ๐**
