# ๐ ุฏููู ุฅุนุฏุงุฏ ูุธุงู ุงูุดุญู

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชูุนูู ูุธุงู ุดุญู ูุชูุงูู ูุน ุฑุจุท API ุญูููู ูุซูุงุซ ุดุฑูุงุช ุดุญู ุณุนูุฏูุฉ:
- ๐ฆ **ุณูุณุง (SMSA Express)**
- ๐ด **ุฑูุฏุจูุณ (Redbox)**
- โ๏ธ **ุฃุฑุงููุณ (Aramex)**

---

## ๐ฏ ุงููููุฒุงุช

โ **ุฑุจุท API ุญูููู** ูุน ุดุฑูุงุช ุงูุดุญู
โ **ูุถุน ุชุฌุฑูุจู** ููุงุฎุชุจุงุฑ ุจุฏูู ุงุชุตุงู ุญูููู
โ **ุฅุฏุงุฑุฉ ูุงููุฉ** ูู ููุญุฉ ุงูุชุญูู
โ **ุฃุณุนุงุฑ ูุฎุตุตุฉ** ููู ูุฏููุฉ
โ **ุชุชุจุน ุงูุดุญูุงุช** ูุจุงุดุฑุฉ
โ **ุญุณุงุจ ุชููุงุฆู** ูุชูููุฉ ุงูุดุญู

---

## ๐ ุฎุทูุงุช ุงูุชูุนูู

### 1๏ธโฃ ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
cd backend
npm run db:migrate
```

### 2๏ธโฃ ุชููุฆุฉ ุจูุงูุงุช ุงูุดุญู

```bash
npm run init:shipping
```

ูุฐุง ุงูุฃูุฑ ุณูููู ุจู:
- ุฅูุดุงุก ุงูุดุฑูุงุช ุงูุซูุงุซ (ุณูุณุงุ ุฑูุฏุจูุณุ ุฃุฑุงููุณ)
- ุฅุถุงูุฉ ุฃุณุนุงุฑ ุงูุดุญู ูู 10 ูุฏู ุฑุฆูุณูุฉ
- ุชูุนูู ุงููุถุน ุงูุชุฌุฑูุจู ุงูุชุฑุงุถูุงู

### 3๏ธโฃ ุชุดุบูู ุงูุณูุฑูุฑ

```bash
npm run dev
```

### 4๏ธโฃ ูุชุญ ููุญุฉ ุงูุฅุฏุงุฑุฉ

ุงูุชุญ ุงููุชุตูุญ ุนูู:
```
http://localhost:3000/admin/settings/shipping
```

---

## โ๏ธ ุฅุนุฏุงุฏ ุดุฑูุงุช ุงูุดุญู

### ๐งช ุงููุถุน ุงูุชุฌุฑูุจู (Test Mode)

- **ููุนูู ุงูุชุฑุงุถูุงู** ุนูุฏ ุงูุชููุฆุฉ
- ูุณุชุฎุฏู ุจูุงูุงุช ููููุฉ ููุงุฎุชุจุงุฑ
- ูุง ูุชุทูุจ ููุงุชูุญ API
- ูุซุงูู ููุชุทููุฑ ูุงูุงุฎุชุจุงุฑ

### ๐ ุงููุถุน ุงูุญูููู (Production Mode)

ูุชูุนูู ุงูุฑุจุท ุงูุญูููู:

#### ๐ฆ ุณูุณุง (SMSA)

1. ุณุฌู ูู [smsaexpress.com](https://smsaexpress.com)
2. ุงุญุตู ุนูู **API Key** ูู ููุญุฉ ุงูุชุญูู
3. ุฃุฏุฎู ุงูููุงุชูุญ ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช:
   - **API Key**: ููุชุงุญ API ุงูุฎุงุต ุจู
   - **API Secret**: ูููุฉ ุงููุฑูุฑ
   - **API URL**: (ุงุฎุชูุงุฑู) `https://track.smsaexpress.com/api`

#### ๐ด ุฑูุฏุจูุณ (Redbox)

1. ุณุฌู ูู [redboxsa.com](https://redboxsa.com)
2. ุงุญุตู ุนูู **API Token** ูู ุญุณุงุจู
3. ุฃุฏุฎู ุงูููุงุชูุญ:
   - **API Key**: ุงูุชููู ุงูุฎุงุต ุจู
   - **API Secret**: ูููุฉ ุงููุฑูุฑ
   - **API URL**: (ุงุฎุชูุงุฑู) `https://api.redboxsa.com/v1`

#### โ๏ธ ุฃุฑุงููุณ (Aramex)

1. ุณุฌู ูู [aramex.com](https://www.aramex.com/sa/ar)
2. ุงุญุตู ุนูู ุจูุงูุงุช ุงูุญุณุงุจ
3. ุฃุฏุฎู ุงูููุงุชูุญ:
   - **API Key**: Username
   - **API Secret**: Password
   - **Account Number**: ุฑูู ุญุณุงุจู
   - **API URL**: (ุงุฎุชูุงุฑู) `https://ws.aramex.net/ShippingAPI.V2/Shipping/Service_1_0.svc/json`

---

## ๐ฐ ุฅุฏุงุฑุฉ ุฃุณุนุงุฑ ุงูุดุญู

### ุงููุฏู ุงููุถุงูุฉ ุงูุชุฑุงุถูุงู:

| ุงููุฏููุฉ | ุณูุณุง | ุฑูุฏุจูุณ | ุฃุฑุงููุณ |
|---------|------|--------|--------|
| ุงูุฑูุงุถ | 15 ุฑูุงู | 18 ุฑูุงู | 20 ุฑูุงู |
| ุฌุฏุฉ | 20 ุฑูุงู | 15 ุฑูุงู | 25 ุฑูุงู |
| ุงูุฏูุงู | 20 ุฑูุงู | 22 ุฑูุงู | 18 ุฑูุงู |
| ููุฉ | 20 ุฑูุงู | 15 ุฑูุงู | 25 ุฑูุงู |
| ุงููุฏููุฉ | 25 ุฑูุงู | 20 ุฑูุงู | 28 ุฑูุงู |
| ุงูุฎุจุฑ | 20 ุฑูุงู | 22 ุฑูุงู | 18 ุฑูุงู |
| ุงูุทุงุฆู | 22 ุฑูุงู | 18 ุฑูุงู | 26 ุฑูุงู |
| ุชุจูู | 30 ุฑูุงู | 28 ุฑูุงู | 32 ุฑูุงู |
| ุฃุจูุง | 28 ุฑูุงู | 26 ุฑูุงู | 30 ุฑูุงู |
| ุญุงุฆู | 28 ุฑูุงู | 26 ุฑูุงู | 30 ุฑูุงู |

### ุฅุถุงูุฉ ูุฏููุฉ ุฌุฏูุฏุฉ:

ููููู ุฅุถุงูุฉ ุฃุณุนุงุฑ ููุฏู ุฌุฏูุฏุฉ ูู ุฎูุงู API:

```javascript
POST http://localhost:4000/api/shipping/rates
Authorization: Bearer {admin_token}

{
  "providerId": "provider_id_here",
  "city": "ุงูุฃุญุณุงุก",
  "price": 22,
  "estimatedDays": 2
}
```

---

## ๐ ุงุณุชุฎุฏุงู API

### 1. ุงูุญุตูู ุนูู ุฎูุงุฑุงุช ุงูุดุญู

```javascript
GET http://localhost:4000/api/shipping/rates?city=ุงูุฑูุงุถ

Response:
{
  "success": true,
  "rates": [
    {
      "providerId": "xxx",
      "providerName": "ุณูุณุง",
      "price": 15,
      "estimatedDays": 1
    }
  ]
}
```

### 2. ุฅูุดุงุก ุดุญูุฉ

```javascript
POST http://localhost:4000/api/shipping/shipments
Authorization: Bearer {user_token}

{
  "orderId": "order_id",
  "providerId": "provider_id",
  "customerInfo": {
    "name": "ุฃุญูุฏ ูุญูุฏ",
    "phone": "0501234567",
    "email": "ahmad@example.com",
    "address": "ุดุงุฑุน ุงูููู ููุฏ",
    "city": "ุงูุฑูุงุถ",
    "postalCode": "12345"
  },
  "items": [
    {
      "name": "iPhone 15 Pro",
      "quantity": 1,
      "weight": 0.5,
      "value": 4500
    }
  ],
  "totalValue": 4500,
  "codAmount": 4500
}

Response:
{
  "success": true,
  "shipment": {
    "trackingNumber": "SMSA1234567890",
    "estimatedDelivery": "2024-01-15",
    "cost": 15
  }
}
```

### 3. ุชุชุจุน ุงูุดุญูุฉ

```javascript
GET http://localhost:4000/api/shipping/track/SMSA1234567890

Response:
{
  "success": true,
  "tracking": {
    "trackingNumber": "SMSA1234567890",
    "status": "in_transit",
    "statusAr": "ููุฏ ุงูุชูุตูู",
    "currentLocation": "ุงูุฑูุงุถ",
    "estimatedDelivery": "2024-01-15",
    "history": [
      {
        "status": "picked_up",
        "statusAr": "ุชู ุงูุงุณุชูุงู",
        "location": "ุงููุณุชูุฏุน",
        "timestamp": "2024-01-13T10:00:00Z"
      }
    ]
  }
}
```

---

## ๐จ ุงุณุชุฎุฏุงู ูู Frontend

### ูุซุงู: ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุดุญู

```tsx
import ShippingSelector from '@/components/ShippingSelector';

function CheckoutPage() {
  const [selectedShipping, setSelectedShipping] = useState(null);

  return (
    <ShippingSelector
      city="ุงูุฑูุงุถ"
      onSelect={(option) => setSelectedShipping(option)}
      selectedProviderId={selectedShipping?.providerId}
    />
  );
}
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ ุงููุถุน ุงูุชุฌุฑูุจู

```bash
# ุชุฃูุฏ ุฃู testMode = true ูู ุงูุฅุนุฏุงุฏุงุช
# ุซู ุฌุฑุจ ุฅูุดุงุก ุดุญูุฉ ูู ุตูุญุฉ ุงูุทูุจุงุช
```

### 2. ุงุฎุชุจุงุฑ ุงูุฑุจุท ุงูุญูููู

```bash
# 1. ุฃุฏุฎู ููุงุชูุญ API ุงูุญููููุฉ
# 2. ุบููุฑ testMode ุฅูู false
# 3. ุฃูุดุฆ ุทูุจ ุญูููู
# 4. ุชุญูู ูู ููุญุฉ ุชุญูู ุดุฑูุฉ ุงูุดุญู
```

---

## ๐ ุญุงูุงุช ุงูุดุญูุฉ

| ุงูุญุงูุฉ | ุงููุตู |
|--------|-------|
| `pending` | ููุฏ ุงูุงูุชุธุงุฑ |
| `picked_up` | ุชู ุงูุงุณุชูุงู ูู ุงููุณุชูุฏุน |
| `in_transit` | ููุฏ ุงูุชูุตูู |
| `out_for_delivery` | ุฎุฑุฌ ููุชูุตูู |
| `delivered` | ุชู ุงูุชูุตูู |
| `failed` | ูุดู ุงูุชูุตูู |
| `returned` | ุชู ุงูุฅุฑุฌุงุน |

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ุชุธูุฑ ุฎูุงุฑุงุช ุงูุดุญู

**ุงูุญู:**
```bash
# ุชุฃูุฏ ูู ุชุดุบูู init:shipping
cd backend
npm run init:shipping

# ุชุญูู ูู ุชูุนูู ุงูุดุฑูุงุช
# ุงูุชุญ: http://localhost:3000/admin/settings/shipping
```

### ุงููุดููุฉ: ุฎุทุฃ ูู ุงูุงุชุตุงู ุจู API

**ุงูุญู:**
1. ุชุญูู ูู ุตุญุฉ ููุงุชูุญ API
2. ุชุฃูุฏ ูู ุชูุนูู ุงููุถุน ุงูุชุฌุฑูุจู ููุงุฎุชุจุงุฑ
3. ุฑุงุฌุน console logs ูู Backend

### ุงููุดููุฉ: ุฃุณุนุงุฑ ุฎุงุทุฆุฉ

**ุงูุญู:**
```bash
# ุญุฏูุซ ุฃุณุนุงุฑ ุงูุดุญู ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ
# ุฃู ุงุณุชุฎุฏู API:
PUT http://localhost:4000/api/shipping/rates/{rate_id}
{
  "price": 25,
  "estimatedDays": 2
}
```

---

## ๐ฑ ุงูุฑุจุท ูุน ูุธุงู ุงูุทูุจุงุช

ุงููุธุงู ูุฑุจูุท ุชููุงุฆูุงู ูุน:
- โ ุตูุญุฉ ุงูุทูุจุงุช (Checkout)
- โ ุญุณุงุจ ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ
- โ ุชุชุจุน ุงูุดุญูุงุช
- โ ุฅุดุนุงุฑุงุช ุงูุนููุงุก

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ **ุงุฎุชุจุฑ ุงููุถุน ุงูุชุฌุฑูุจู** ุฃููุงู
2. ๐ **ุณุฌู ูู ุดุฑูุงุช ุงูุดุญู** ููุญุตูู ุนูู API Keys
3. ๐ **ุฃุฏุฎู ุงูููุงุชูุญ** ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ
4. ๐ **ูุนูู ุงููุถุน ุงูุญูููู**
5. ๐ฆ **ุงุจุฏุฃ ุงูุดุญู!**

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุฑุงุฌุน console logs ูู Backend
2. ุชุญูู ูู ุตุญุฉ ููุงุชูุญ API
3. ุงุณุชุฎุฏู ุงููุถุน ุงูุชุฌุฑูุจู ููุงุฎุชุจุงุฑ
4. ุฑุงุฌุน documentation ุดุฑูุงุช ุงูุดุญู

---

## ๐ ุชู!

ูุธุงู ุงูุดุญู ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐

**ุฑูุงุจุท ูููุฉ:**
- ููุญุฉ ุฅุฏุงุฑุฉ ุงูุดุญู: http://localhost:3000/admin/settings/shipping
- API Documentation: ุฑุงุฌุน ุงูููู ุฃุนูุงู
- ุงุฎุชุจุงุฑ ุงูุดุญู: http://localhost:3000/checkout

---

**ููุงุญุธุฉ:** ุชุฃูุฏ ูู ุชุดุบูู `npm run init:shipping` ูุจู ุงูุงุณุชุฎุฏุงู!
