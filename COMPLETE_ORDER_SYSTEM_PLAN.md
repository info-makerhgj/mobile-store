# ๐ฏ ุฎุทุฉ ูุธุงู ุงูุทูุจุงุช ุงููุงูู - ูู ุงูุตูุฑ

## ๐ ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

### ุดุฑูุท ุฅุชูุงู ุงูุทูุจ:
1. โ **ุชุณุฌูู ุงูุฏุฎูู ุฅุฌุจุงุฑู** - ูุง ูููู ุงูุทูุจ ุจุฏูู ุญุณุงุจ
2. โ **ุนููุงู ูุญููุธ** - ูุฎุชุงุฑ ูู ุนูุงูููู ุงููุญููุธุฉ
3. โ **3 ุฎุทูุงุช ูุงุถุญุฉ**:
   - ุงูุฎุทูุฉ 1: ุงุฎุชูุงุฑ ุงูุนููุงู
   - ุงูุฎุทูุฉ 2: ุงุฎุชูุงุฑ ุดุฑูุฉ ุงูุดุญู
   - ุงูุฎุทูุฉ 3: ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุฏูุน ูุงูุชุฃููุฏ
4. โ **ุงูุชุญูู ุงููุงูู** ูุจู ุฅูุดุงุก ุงูุทูุจ
5. โ **ุฅุฑุณุงู ูููุญุฉ ุงูุฅุฏุงุฑุฉ** ุจุนุฏ ุงูุชุฃููุฏ

---

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### Backend Components:

#### 1. Address Management
```
- GET  /api/addresses          - ุฌูุจ ุนูุงููู ุงููุณุชุฎุฏู
- POST /api/addresses          - ุฅุถุงูุฉ ุนููุงู ุฌุฏูุฏ
- PUT  /api/addresses/:id      - ุชุนุฏูู ุนููุงู
- DELETE /api/addresses/:id    - ุญุฐู ุนููุงู
- PUT  /api/addresses/:id/default - ุชุนููู ุนููุงู ุงูุชุฑุงุถู
```

#### 2. Order Validation
```
- ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
- ุงูุชุญูู ูู ูุฌูุฏ ุนููุงู
- ุงูุชุญูู ูู ุชููุฑ ุงูููุชุฌุงุช
- ุงูุชุญูู ูู ุงููุฎุฒูู
- ุงูุชุญูู ูู ุดุฑูุฉ ุงูุดุญู
- ุงูุชุญูู ูู ุทุฑููุฉ ุงูุฏูุน
- ุญุณุงุจ ุงูุฃุณุนุงุฑ (ููุชุฌุงุช + ุดุญู + ุถุฑูุจุฉ)
```

#### 3. Order Creation Flow
```
1. Validate User Authentication
2. Validate Address
3. Validate Cart Items
4. Check Stock Availability
5. Calculate Shipping Cost
6. Calculate Tax
7. Calculate Total
8. Create Order (PENDING)
9. Create Payment Intent
10. Return Payment URL or Success
```

### Frontend Components:

#### 1. Address Selector Component
```tsx
- ุนุฑุถ ุงูุนูุงููู ุงููุญููุธุฉ
- ุงุฎุชูุงุฑ ุนููุงู
- ุฅุถุงูุฉ ุนููุงู ุฌุฏูุฏ
- ุชุนุฏูู ุนููุงู
```

#### 2. Shipping Selector Component (ููุฌูุฏ)
```tsx
- ุนุฑุถ ุดุฑูุงุช ุงูุดุญู ุงููุชุงุญุฉ
- ุนุฑุถ ุงูุฃุณุนุงุฑ ูุงููุฏุฉ
- ุงุฎุชูุงุฑ ุดุฑูุฉ
```

#### 3. Payment Selector Component
```tsx
- ุนุฑุถ ุทุฑู ุงูุฏูุน ุงููุชุงุญุฉ
- ุงุฎุชูุงุฑ ุทุฑููุฉ
```

#### 4. Order Summary Component
```tsx
- ุนุฑุถ ุงูููุชุฌุงุช
- ุนุฑุถ ุงูุนููุงู ุงููุฎุชุงุฑ
- ุนุฑุถ ุดุฑูุฉ ุงูุดุญู
- ุนุฑุถ ุทุฑููุฉ ุงูุฏูุน
- ุนุฑุถ ุงูุญุณุงุจ ุงููุงูู
```

---

## ๐ฑ ุชุฏูู ุงููุณุชุฎุฏู (User Flow)

### ูุจู ุงูุทูุจ:
```
1. ุงููุณุชุฎุฏู ูุถูู ููุชุฌุงุช ููุณูุฉ
2. ูุถุบุท "ุฅุชูุงู ุงูุทูุจ"
3. ุงููุธุงู ูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
   - ุฅุฐุง ูู ููู ูุณุฌู โ ุชูุฌูู ูุชุณุฌูู ุงูุฏุฎูู
   - ุฅุฐุง ูุณุฌู โ ูุชุงุจุนุฉ
```

### ุงูุฎุทูุฉ 1: ุงุฎุชูุงุฑ ุงูุนููุงู
```
- ุนุฑุถ ุงูุนูุงููู ุงููุญููุธุฉ
- ุฅุฐุง ูู ููู ูุฏูู ุนูุงููู โ ุฅุถุงูุฉ ุนููุงู ุฌุฏูุฏ
- ุงุฎุชูุงุฑ ุนููุงู
- ุฒุฑ "ุงูุชุงูู" (disabled ุญุชู ูุฎุชุงุฑ ุนููุงู)
```

### ุงูุฎุทูุฉ 2: ุงุฎุชูุงุฑ ุดุฑูุฉ ุงูุดุญู
```
- ุฌูุจ ุดุฑูุงุช ุงูุดุญู ุงููุชุงุญุฉ ูููุฏููุฉ
- ุนุฑุถ ุงูุณุนุฑ ูุงููุฏุฉ ููู ุดุฑูุฉ
- ุงุฎุชูุงุฑ ุดุฑูุฉ
- ุชุญุฏูุซ ุงูุฅุฌูุงูู ุชููุงุฆูุงู
- ุฒุฑ "ุงูุชุงูู" (disabled ุญุชู ูุฎุชุงุฑ ุดุฑูุฉ)
```

### ุงูุฎุทูุฉ 3: ุงูุฏูุน ูุงูุชุฃููุฏ
```
- ุนุฑุถ ููุฎุต ูุงูู:
  * ุงูููุชุฌุงุช
  * ุงูุนููุงู
  * ุดุฑูุฉ ุงูุดุญู
  * ุงููุฌููุน ุงููุฑุนู
  * ุชูููุฉ ุงูุดุญู
  * ุงูุถุฑูุจุฉ
  * ุงูุฅุฌูุงูู
- ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุฏูุน
- ุฒุฑ "ุชุฃููุฏ ุงูุทูุจ"
```

### ุจุนุฏ ุงูุชุฃููุฏ:
```
1. ุฅูุดุงุก ุงูุทูุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (PENDING)
2. ุฅุฐุง ูุงู COD:
   - ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ (CONFIRMED)
   - ุชูุฌูู ูุตูุญุฉ ุงููุฌุงุญ
3. ุฅุฐุง ูุงู ุฏูุน ุฅููุชุฑููู:
   - ุฅูุดุงุก Payment Intent
   - ุชูุฌูู ูุจูุงุจุฉ ุงูุฏูุน
   - ุจุนุฏ ุงูุฏูุน โ Callback โ ุชุญุฏูุซ ุงูุทูุจ
```

---

## ๐๏ธ Database Schema

### Address Model (ููุฌูุฏ)
```prisma
model Address {
  id         String  @id
  userId     String
  fullName   String
  phone      String
  city       String
  district   String
  street     String
  building   String?
  postalCode String?
  isDefault  Boolean @default(false)
}
```

### Order Model (ุชุญุฏูุซ)
```prisma
model Order {
  id              String
  orderNumber     String
  
  // User
  userId          String
  
  // Address
  addressId       String?
  shippingAddress Json
  
  // Items
  items           OrderItem[]
  
  // Pricing
  subtotal        Float
  shippingCost    Float
  tax             Float
  total           Float
  
  // Shipping
  shippingProviderId String?
  shippingProvider   String?
  trackingNumber     String?
  
  // Payment
  paymentMethod   String
  paymentStatus   String
  paymentId       String?
  
  // Status
  status          String
  
  // Timestamps
  createdAt       DateTime
  updatedAt       DateTime
}
```

---

## โ Validation Rules

### 1. User Validation
```typescript
- ูุฌุจ ุฃู ูููู ูุณุฌู ุฏุฎูู
- ูุฌุจ ุฃู ูููู ูุฏูู token ุตุงูุญ
```

### 2. Address Validation
```typescript
- ูุฌุจ ุงุฎุชูุงุฑ ุนููุงู
- ุงูุนููุงู ูุฌุจ ุฃู ูููู ูููุณุชุฎุฏู ููุณู
- ุงูุนููุงู ูุฌุจ ุฃู ูุญุชูู ุนูู:
  * ุงูุงุณู ุงููุงูู
  * ุฑูู ุงูุฌูุงู (10 ุฃุฑูุงู)
  * ุงููุฏููุฉ
  * ุงูุญู
  * ุงูุดุงุฑุน
```

### 3. Cart Validation
```typescript
- ุงูุณูุฉ ูุฌุจ ุฃูุง ุชููู ูุงุฑุบุฉ
- ูู ููุชุฌ ูุฌุจ ุฃู ูููู ููุฌูุฏ
- ูู ููุชุฌ ูุฌุจ ุฃู ูููู ูุชููุฑ ูู ุงููุฎุฒูู
- ุงููููุฉ ูุฌุจ ุฃู ุชููู ุฃูุจุฑ ูู 0
```

### 4. Shipping Validation
```typescript
- ูุฌุจ ุงุฎุชูุงุฑ ุดุฑูุฉ ุดุญู
- ุงูุดุฑูุฉ ูุฌุจ ุฃู ุชููู ููุนูุฉ
- ุงูุดุฑูุฉ ูุฌุจ ุฃู ุชุฏุนู ุงููุฏููุฉ ุงููุฎุชุงุฑุฉ
```

### 5. Payment Validation
```typescript
- ูุฌุจ ุงุฎุชูุงุฑ ุทุฑููุฉ ุฏูุน
- ุทุฑููุฉ ุงูุฏูุน ูุฌุจ ุฃู ุชููู ููุนูุฉ
```

---

## ๐จ UI/UX Design

### Progress Indicator
```
[1] ุงุฎุชูุงุฑ ุงูุนููุงู  โ  [2] ุดุฑูุฉ ุงูุดุญู  โ  [3] ุงูุฏูุน ูุงูุชุฃููุฏ
 โ                      โ                    โ
```

### Layout
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Header                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                 โ
โ  Progress: [1] โ [2] โ [3]                     โ
โ                                                 โ
โ  โโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโ   โ
โ  โ                  โ  โ  ููุฎุต ุงูุทูุจ      โ   โ
โ  โ  ูุญุชูู ุงูุฎุทูุฉ   โ  โ                  โ   โ
โ  โ                  โ  โ  ุงูููุชุฌุงุช       โ   โ
โ  โ                  โ  โ  ุงูุนููุงู        โ   โ
โ  โ                  โ  โ  ุงูุดุญู          โ   โ
โ  โ                  โ  โ  โโโโโโโโโโโโโ   โ   โ
โ  โ                  โ  โ  ุงููุฌููุน        โ   โ
โ  โ                  โ  โ  ุงูุดุญู          โ   โ
โ  โ                  โ  โ  ุงูุถุฑูุจุฉ        โ   โ
โ  โ                  โ  โ  โโโโโโโโโโโโโ   โ   โ
โ  โ                  โ  โ  ุงูุฅุฌูุงูู       โ   โ
โ  โ                  โ  โโโโโโโโโโโโโโโโโโโโ   โ
โ  โ                  โ                          โ
โ  โ  [ุงูุณุงุจู] [ุงูุชุงูู]                         โ
โ  โโโโโโโโโโโโโโโโโโโโ                          โ
โ                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  Footer                                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ Implementation Steps

### Phase 1: Backend Setup
1. โ Address CRUD endpoints
2. โ Order validation service
3. โ Order creation service
4. โ Update order controller

### Phase 2: Frontend Components
1. โ AddressSelector component
2. โ ShippingSelector component (ููุฌูุฏ)
3. โ PaymentSelector component
4. โ OrderSummary component
5. โ ProgressIndicator component

### Phase 3: Checkout Page
1. โ Multi-step form
2. โ State management
3. โ Validation
4. โ API integration

### Phase 4: Testing
1. โ Test complete flow
2. โ Test validation
3. โ Test error handling
4. โ Test payment integration

---

## ๐ Success Criteria

- โ ูุง ูููู ุงูุทูุจ ุจุฏูู ุชุณุฌูู ุฏุฎูู
- โ ูุง ูููู ุงูุทูุจ ุจุฏูู ุนููุงู
- โ ูุง ูููู ุงูุทูุจ ุจุฏูู ุงุฎุชูุงุฑ ุดุฑูุฉ ุดุญู
- โ ูุง ูููู ุงูุทูุจ ุจุฏูู ุงุฎุชูุงุฑ ุทุฑููุฉ ุฏูุน
- โ ุงูุชุญูู ูู ุงููุฎุฒูู ูุจู ุฅูุดุงุก ุงูุทูุจ
- โ ุญุณุงุจ ุงูุฃุณุนุงุฑ ุตุญูุญ
- โ ุงูุทูุจ ูุธูุฑ ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ
- โ ุงูุนููู ูุณุชูู ุชุฃููุฏ ุงูุทูุจ

---

## ๐ฏ Ready to Implement!

ูู ุชุฑูุฏ ุงูุจุฏุก ูู ุงูุชูููุฐุ
