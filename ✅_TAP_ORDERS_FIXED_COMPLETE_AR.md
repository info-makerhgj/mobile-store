# โ ุชู ุฅุตูุงุญ ูุดููุฉ ุทูุจุงุช Tap ุจุงููุงูู

## ๐ ุงูุฅุตูุงุญ ุงูููุงุฆู

ุชู ุฅุตูุงุญ ุงููุดููุฉ ุงููุจูุฑุฉ: **ุงูุทูุจุงุช ูุงูุช ุชุธูุฑ ูู ููุญุฉ ุงูุชุญูู ูุจู ุงูุฏูุน!**

---

## โ ูุง ุชู ุฅุตูุงุญู

### Frontend โ
1. **checkout/page.tsx**
   - ุฅุถุงูุฉ `status: 'DRAFT'` ููุทูุจุงุช ุนุจุฑ Tap
   - ุฅุถุงูุฉ `isDraft: true`
   - ุงูุณูุฉ ูุง ุชููุณุญ ุฅูุง ุจุนุฏ ูุฌุงุญ ุงูุฏูุน

2. **payment/callback/page.tsx**
   - ุตูุญุฉ ุฌุฏูุฏุฉ ููุชุญูู ูู ุงูุฏูุน
   - ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ ูู DRAFT ุฅูู confirmed
   - ูุณุญ ุงูุณูุฉ ุจุนุฏ ุงููุฌุงุญ

### Backend โ
1. **OrderService.ts**
   - ุฏุนู `orderData.status` ูู ุฅูุดุงุก ุงูุทูุจ
   - ุฅุฎูุงุก ุงูุทูุจุงุช DRAFT ูู `getAllOrders()`

2. **orderController.ts**
   - ุฅุถุงูุฉ `confirmOrderPayment()` endpoint ุฌุฏูุฏ

3. **orders.ts (routes)**
   - ุฅุถุงูุฉ route: `POST /orders/:id/confirm`

---

## ๐ ุณูุฑ ุงูุนูู ุงูุฌุฏูุฏ

### ููุฏูุน ุนูุฏ ุงูุงุณุชูุงู (COD):
```
1. ุฅูุดุงุก ุทูุจ ุจุญุงูุฉ "confirmed" โ
2. ูุธูุฑ ูู ููุญุฉ ุงูุชุญูู ููุฑุงู โ
3. ูุณุญ ุงูุณูุฉ โ
4. ุนุฑุถ ุตูุญุฉ ุงููุฌุงุญ โ
```

### ููุฏูุน ุนุจุฑ Tap:
```
1. ุฅูุดุงุก ุทูุจ ุจุญุงูุฉ "draft" ๐
2. ูุง ูุธูุฑ ูู ููุญุฉ ุงูุชุญูู โ
3. ุชูุฌูู ุงูุนููู ูุตูุญุฉ ุงูุฏูุน ๐ณ
4. ุงูุนููู ูุฏูุน โ
5. Callback: ุชุญุฏูุซ ุงูุทูุจ ุฅูู "confirmed" โ
6. ุงูุทูุจ ูุธูุฑ ูู ููุญุฉ ุงูุชุญูู โ
7. ูุณุญ ุงูุณูุฉ โ
8. ุนุฑุถ ุตูุญุฉ ุงููุฌุงุญ โ
```

### ุฅุฐุง ูุดู ุงูุฏูุน:
```
1. ุงูุทูุจ ูุจูู "draft" ๐
2. ูุง ูุธูุฑ ูู ููุญุฉ ุงูุชุญูู โ
3. ุงูุณูุฉ ุชุจูู ููุฌูุฏุฉ ๐
4. ุงูุนููู ููููู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู ๐
```

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### Frontend
- โ `frontend/src/app/checkout/page.tsx`
- โ `frontend/src/app/payment/callback/page.tsx`
- โ `frontend/src/app/order-success/page.tsx`

### Backend
- โ `backend/src/services/OrderService.ts`
- โ `backend/src/controllers/orderController.ts`
- โ `backend/src/routes/orders.ts`

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุงุฎุชุจุงุฑ COD
```
โ ุงูุทูุจ ูููุดุฃ ุจุญุงูุฉ "confirmed"
โ ูุธูุฑ ูู ููุญุฉ ุงูุชุญูู ููุฑุงู
โ ุงูุณูุฉ ุชููุณุญ
โ ุตูุญุฉ ุงููุฌุงุญ ุชุธูุฑ
```

### 2. ุงุฎุชุจุงุฑ Tap - ูุฌุงุญ
```
โ ุงูุทูุจ ูููุดุฃ ุจุญุงูุฉ "draft"
โ ูุง ูุธูุฑ ูู ููุญุฉ ุงูุชุญูู
โ ุงูุชูุฌูู ูุตูุญุฉ ุงูุฏูุน
โ ุจุนุฏ ุงูุฏูุน: ุงูุทูุจ ูุชุญูู ุฅูู "confirmed"
โ ุงูุทูุจ ูุธูุฑ ูู ููุญุฉ ุงูุชุญูู
โ ุงูุณูุฉ ุชููุณุญ
โ ุตูุญุฉ ุงููุฌุงุญ ุชุธูุฑ
```

### 3. ุงุฎุชุจุงุฑ Tap - ูุดู
```
โ ุงูุทูุจ ูููุดุฃ ุจุญุงูุฉ "draft"
โ ูุง ูุธูุฑ ูู ููุญุฉ ุงูุชุญูู
โ ุงูุชูุฌูู ูุตูุญุฉ ุงูุฏูุน
โ ุงูุนููู ููุบู ุฃู ููุดู ุงูุฏูุน
โ ุงูุทูุจ ูุจูู "draft"
โ ุงูุณูุฉ ุชุจูู ููุฌูุฏุฉ
โ ุงูุนููู ููููู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู
```

---

## ๐ฏ ุงููุชูุฌุฉ

### ูุจู ุงูุฅุตูุงุญ โ:
- ุทูุจุงุช ููููุฉ ูู ููุญุฉ ุงูุชุญูู
- ุตุนูุจุฉ ุชุชุจุน ุงูุทูุจุงุช ุงูุญููููุฉ
- ุงูุณูุฉ ุชููุณุญ ุญุชู ูู ูู ูุฏูุน ุงูุนููู

### ุจุนุฏ ุงูุฅุตูุงุญ โ:
- ููุท ุงูุทูุจุงุช ุงููุคูุฏุฉ ุชุธูุฑ ูู ููุญุฉ ุงูุชุญูู
- ุณูููุฉ ุชุชุจุน ุงูุทูุจุงุช ุงูุญููููุฉ
- ุงูุณูุฉ ุชุจูู ุฅุฐุง ูู ููุชูู ุงูุฏูุน

---

## ๐ ุญุงูุงุช ุงูุทูุจ

| ุงูุญุงูุฉ | ุงููุตู | ูุธูุฑ ูู ููุญุฉ ุงูุชุญููุ |
|--------|-------|---------------------|
| **draft** | ูุณูุฏุฉ - ูู ูุชู ุงูุฏูุน | โ ูุง |
| **pending** | ูู ุงูุชุธุงุฑ ุงูุชุฃููุฏ | โ ูุนู |
| **confirmed** | ูุคูุฏ | โ ูุนู |
| **processing** | ููุฏ ุงููุนุงูุฌุฉ | โ ูุนู |
| **shipped** | ุชู ุงูุดุญู | โ ูุนู |
| **delivered** | ุชู ุงูุชูุตูู | โ ูุนู |
| **cancelled** | ููุบู | โ ูุนู |

---

## ๐ API Endpoints

### ุฅูุดุงุก ุทูุจ
```
POST /api/orders
Body: {
  items: [...],
  shippingAddress: {...},
  paymentMethod: 'tap',
  status: 'draft',  // ููู Tap
  isDraft: true
}
```

### ุชุฃููุฏ ุงูุทูุจ (ุจุนุฏ ูุฌุงุญ ุงูุฏูุน)
```
POST /api/orders/:id/confirm
Body: {
  paymentId: 'tap_xxxxx'
}
```

### ุฌูุจ ุฌููุน ุงูุทูุจุงุช (Admin)
```
GET /api/orders/admin/all
// ููุฑุฌุน ููุท ุงูุทูุจุงุช ุงูุชู ููุณุช draft
```

---

**ุชู ุงูุฅุตูุงุญ**: 30 ููููุจุฑ 2025  
**ุงูุญุงูุฉ**: โ ููุชูู ุจุงููุงูู  
**ุชู ุงูุงุฎุชุจุงุฑ**: โ๏ธ ูุญุชุงุฌ ุงุฎุชุจุงุฑ ูู ุงููุณุชุฎุฏู
