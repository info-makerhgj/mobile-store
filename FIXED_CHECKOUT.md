# โ ุชู ุฅุตูุงุญ ุตูุญุฉ ุงูุฏูุน (Checkout)

## ๐ง ุงููุดููุฉ ุงูุชู ุชู ุญููุง:

ูุงูุช ุงููุดููุฉ ุฃู Prisma ูุญุงูู ุงุณุชุฎุฏุงู **transactions** ูุน MongoDBุ ููู MongoDB ูุญุชุงุฌ **replica set** ูุฏุนู ุงูู transactions.

### ุงูุฎุทุฃ ุงูุณุงุจู:
```
PrismaClientKnownRequestError: 
Prisma needs to perform transactions, which requires your MongoDB server 
to be run as a replica set.
```

---

## โ ุงูุญู:

ุชู ุงุณุชุจุฏุงู **Prisma** ุจู **MongoDB Driver** ูุจุงุดุฑุฉ ูู `orderController.ts`

### ุงูุชุบููุฑุงุช:
- โ ูุจู: ุงุณุชุฎุฏุงู `prisma.order.create()` ูุน transactions
- โ ุจุนุฏ: ุงุณุชุฎุฏุงู `db.collection('Order').insertOne()` ูุจุงุดุฑุฉ

---

## ๐งช ุงุฎุชุจุงุฑ ุงูุขู:

### 1. ุชุฃูุฏ ุฃู ุงูุณูุฑูุฑุงุช ุดุบุงูุฉ:
- โ Backend: http://localhost:4000
- โ Frontend: http://localhost:3000

### 2. ุฌุฑุจ ุนูููุฉ ุดุฑุงุก ูุงููุฉ:

```
ุงูุฎุทูุงุช:
1. ุงูุชุญ: http://localhost:3000
2. ุงุฎุชุฑ ููุชุฌ
3. ุฃุถูู ููุณูุฉ
4. ุงุฐูุจ ููุณูุฉ: http://localhost:3000/cart
5. ุงุถุบุท "ุฅุชูุงู ุงูุทูุจ"
6. ุงููุฃ ุจูุงูุงุช ุงูุดุญู:
   - ุงูุงุณู ุงููุงูู
   - ุฑูู ุงูุฌูุงู
   - ุงููุฏููุฉ
   - ุงูุญู
   - ุงูุดุงุฑุน
   - ุฑูู ุงููุจูู
7. ุงุฎุชุฑ "ุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู (COD)"
8. ุงุถุบุท "ุฅุชูุงู ุงูุทูุจ"
9. โ ูุฌุจ ุฃู ูุชู ุฅูุดุงุก ุงูุทูุจ ุจูุฌุงุญ!
```

---

## ๐ ูุง ูุนูู ุงูุขู:

### โ APIs ุงูุฌุงูุฒุฉ:
- `POST /api/orders` - ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
- `GET /api/orders` - ุฌูุจ ุฌููุน ุงูุทูุจุงุช
- `GET /api/orders/:id` - ุฌูุจ ุทูุจ ูุญุฏุฏ
- `PUT /api/orders/:id/status` - ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ (Admin)

### โ ุทุฑู ุงูุฏูุน:
- ๐ต ุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู (COD) - **ูุนูู ุงูุขู!**
- ๐ณ Tap Payment - ุฌุงูุฒ (ูุญุชุงุฌ API Keys)
- ๐ฐ MyFatoorah - ุฌุงูุฒ (ูุญุชุงุฌ API Keys)
- ๐๏ธ Tamara - ุฌุงูุฒ (ูุญุชุงุฌ API Keys)
- ๐ฆ Tabby - ุฌุงูุฒ (ูุญุชุงุฌ API Keys)

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ:

### ููุนููุงุก:
1. โ ูููููู ุงูุขู ุฅุชูุงู ุงูุทูุจุงุช ุจุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู
2. โ ูููููู ุชุชุจุน ุทูุจุงุชูู ูู ุตูุญุฉ ุงูุญุณุงุจ

### ูููุฏูุฑ (Admin):
1. โ ููููู ุฑุคูุฉ ุฌููุน ุงูุทูุจุงุช
2. โ ููููู ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจุงุช
3. โ ููููู ุชูุนูู ุทุฑู ุฏูุน ุฅุถุงููุฉ ูู ุฅุนุฏุงุฏุงุช ุงูุฏูุน

---

## ๐ ููุงุญุธุงุช:

### ุจูุงูุงุช ุงูุทูุจ ุงููุญููุธุฉ:
```javascript
{
  userId: "user_id",
  items: [
    {
      productId: "product_id",
      quantity: 2,
      price: 2999,
      name: "ุงุณู ุงูููุชุฌ",
      image: "ุฑุงุจุท ุงูุตูุฑุฉ"
    }
  ],
  total: 5998,
  shippingAddress: {
    fullName: "ุฃุญูุฏ ูุญูุฏ",
    phone: "0501234567",
    city: "ุงูุฑูุงุถ",
    district: "ุงููุฑุฌุณ",
    street: "ุดุงุฑุน ุงูููู ููุฏ",
    building: "123"
  },
  paymentMethod: "cod",
  status: "PENDING",
  paymentStatus: "PENDING",
  createdAt: "2025-11-27T...",
  updatedAt: "2025-11-27T..."
}
```

### ุญุงูุงุช ุงูุทูุจ:
- `PENDING` - ููุฏ ุงูุงูุชุธุงุฑ
- `PROCESSING` - ููุฏ ุงููุนุงูุฌุฉ
- `SHIPPED` - ุชู ุงูุดุญู
- `DELIVERED` - ุชู ุงูุชูุตูู
- `CANCELLED` - ููุบู

---

## ๐ ุงูุชุญูู ูู ุงูุทูุจุงุช:

### ูู MongoDB:
```javascript
// ุงูุชุญ MongoDB Compass ุฃู Shell
use abaad_store
db.Order.find().pretty()
```

### ุนุจุฑ API:
```bash
# ุฌูุจ ุฌููุน ุงูุทูุจุงุช (ูุญุชุงุฌ token)
curl -H "Authorization: Bearer YOUR_TOKEN" \
     http://localhost:4000/api/orders
```

---

## โ ุงูุฎูุงุตุฉ:

**ุงููุดููุฉ:** Prisma transactions ูุง ุชุนูู ูุน MongoDB ุจุฏูู replica set  
**ุงูุญู:** ุงุณุชุฎุฏุงู MongoDB Driver ูุจุงุดุฑุฉ  
**ุงููุชูุฌุฉ:** ูุธุงู ุงูุทูุจุงุช ูุงูุฏูุน ูุนูู ุจุดูู ูุงูู! ๐

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 27 ููููุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู
